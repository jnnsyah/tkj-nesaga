generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

/// Jalur pembelajaran terstruktur untuk kurikulum TKJ
model LearningPath {
  id              String                   @id @default(uuid())
  /// identifier unik (e.g. "basic-networking")
  slug            String                   @unique
  icon            String
  title           String
  level           LearningLevel
  levelVariant    String
  actionIcon      String?
  /// topik-topik yang dicakup
  topics          String[]
  /// prasyarat yang dibutuhkan
  prerequisites   String[]
  createdAt       DateTime                 @default(now())
  updatedAt       DateTime                 @updatedAt
  DomainId        String?
  domains         domains?                 @relation(fields: [DomainId], references: [id], onDelete: Cascade)
  recommendations LearningRecommendation[]
  steps           LearningStep[]

  @@map("learning_paths")
}

/// Langkah-langkah dalam sebuah learning path
model LearningStep {
  id             Int                  @id @default(autoincrement())
  title          String
  description    String
  status         StepStatus
  /// Tipe media (e.g. "Video", "Video & Teks")
  mediaType      String?
  /// Urutan langkah dalam path
  order          Int
  learningPathId String
  actions        LearningStepAction[]
  learningPath   LearningPath         @relation(fields: [learningPathId], references: [id], onDelete: Cascade)

  @@map("learning_steps")
}

/// Aksi yang tersedia di setiap langkah learning (link video, teks, dsb)
model LearningStepAction {
  id             Int          @id @default(autoincrement())
  icon           String
  label          String
  /// URL tujuan (opsional)
  to             String?
  learningStepId Int
  learningStep   LearningStep @relation(fields: [learningStepId], references: [id], onDelete: Cascade)

  @@map("learning_step_actions")
}

/// Rekomendasi resource untuk learning path
model LearningRecommendation {
  id             Int           @id @default(autoincrement())
  icon           String
  title          String
  description    String
  href           String
  color          ResourceColor
  learningPathId String
  learningPath   LearningPath  @relation(fields: [learningPathId], references: [id], onDelete: Cascade)

  @@map("learning_recommendations")
}

/// Sumber belajar eksternal (YouTube, sertifikasi, tutorial)
model ExternalResource {
  id          Int           @id @default(autoincrement())
  icon        String
  title       String
  description String
  href        String
  color       ResourceColor
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt

  @@map("external_resources")
}

/// Dokumen template yang bisa diunduh untuk keperluan magang
model DownloadableDocument {
  id        Int      @id @default(autoincrement())
  title     String
  /// Ekstensi file (e.g. ".DOCX")
  ext       String
  icon      String
  href      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("downloadable_documents")
}

/// Pertanyaan yang sering ditanyakan (FAQ) untuk bimbingan magang
model FrequentlyAskedQuestion {
  id          Int      @id @default(autoincrement())
  question    String
  answer      String
  defaultOpen Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("frequently_asked_questions")
}

/// Timeline fase magang (pra, pelaksanaan, pasca)
model InternshipTimeline {
  id          Int          @id @default(autoincrement())
  icon        String
  title       String
  description String
  size        TimelineSize @default(normal)
  highlight   Boolean      @default(false)
  /// Urutan fase dalam timeline
  order       Int
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt

  @@map("internship_timelines")
}

/// Statistik program magang (jumlah mitra, persentase tersalurkan, durasi)
model InternshipStat {
  id    Int    @id @default(autoincrement())
  /// Nilai statistik (e.g. "50+", "100%")
  value String
  /// Label deskriptif
  label String

  @@map("internship_stats")
}

/// Definisi kategori mitra perusahaan dengan ikon dan deskripsi
model PartnerCategory {
  id        Int      @id @default(autoincrement())
  icon      String
  title     String   @unique
  subtitle  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  companies  PartnerCompany[]

  @@map("partner_categories")
}

/// Perusahaan mitra magang untuk siswa TKJ
model PartnerCompany {
  id          Int                 @id @default(autoincrement())
  name        String
  verified    Boolean             @default(false)
  address     String
  phone       String?
  email       String?
  mapsUrl     String?           @db.Text
  createdAt   DateTime            @default(now())
  updatedAt   DateTime            @updatedAt
  reviews     CompanyReview[]
  categories  PartnerCategory[]

  @@map("partner_companies")
}

/// Review/testimoni dari siswa yang pernah magang di perusahaan mitra
model CompanyReview {
  id               Int            @id @default(autoincrement())
  name             String
  academicYear     String
  text             String
  partnerCompanyId Int
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
  partnerCompany   PartnerCompany @relation(fields: [partnerCompanyId], references: [id], onDelete: Cascade)

  @@map("company_reviews")
}

/// Fitur utama program TKJ (bidang keahlian yang diajarkan)
model ProgramFeature {
  id          Int      @id @default(autoincrement())
  icon        String
  title       String
  description String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("program_features")
}

/// Highlight kurikulum TKJ
model CurriculumHighlight {
  id   Int    @id @default(autoincrement())
  text String

  @@map("curriculum_highlights")
}

model domains {
  id             String         @id
  name           String
  slug           String         @unique
  learning_paths LearningPath[]
}

/// Level kesulitan learning path
enum LearningLevel {
  Foundation
  Beginner
  Intermediate
  Advanced
}

/// Status langkah dalam learning path
enum StepStatus {
  current
  available
  locked
}

/// Ukuran tampilan timeline
enum TimelineSize {
  normal
  large
}

/// Warna aksen untuk resource/recommendation
enum ResourceColor {
  red
  blue
  green
  orange
}
